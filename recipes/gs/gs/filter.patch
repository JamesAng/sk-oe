Index: gs/psi/iscan.c
===================================================================
--- gs/psi/iscan.c	(revision 10570)
+++ gs/psi/iscan.c	(working copy)
@@ -329,9 +329,9 @@
 					       rstate, 1, cont);
 	    }
     }
-    /* No more data available, but no exception.  How can this be? */
-    lprintf("Can't refill scanner input buffer!");
-    return_error(e_Fatal);
+    /* No more data available, but no exception. */
+    /* A filter is consuming headers but returns nothing. */
+    return 0;
 }
 
 /*
Index: gs/base/sstring.c
===================================================================
--- gs/base/sstring.c	(revision 10570)
+++ gs/base/sstring.c	(working copy)
@@ -355,8 +355,12 @@
 /* ------ Utilities ------ */
 
 /*
- * Convert hex data to binary.  Return 1 if we filled the string, 0 if
- * we ran out of input data before filling the string, or ERRC on error.
+ * Convert hex data to binary. 
+ * Return 1 if we filled the string,
+ *        0 if we ran out of input data before filling the string,
+ *        2 if hex_break_on_whitespace is on and we encounrered
+ *          a white space.
+ *        ERRC on error.
  * The caller must set *odd_digit to -1 before the first call;
  * after each call, if an odd number of hex digits has been read (total),
  * *odd_digit is the odd digit value, otherwise *odd_digit = -1.
Index: gs/base/seexec.c
===================================================================
--- gs/base/seexec.c	(revision 10570)
+++ gs/base/seexec.c	(working copy)
@@ -165,7 +165,11 @@
 	    r.limit = r.ptr + ss->hex_left;
 	status = s_hex_process(&r, pw, &ss->odd, 
 	  (ss->is_leading_space ? hex_ignore_leading_whitespace : hex_break_on_whitespace));
-        ss->is_leading_space = (status == 2);
+        if (status == 2) {
+            ss->is_leading_space = true;
+            status = 1;
+        } else
+            ss->is_leading_space = false;
 	pr->ptr = r.ptr;
 	ss->hex_left -= r.ptr - start;
 	/*

